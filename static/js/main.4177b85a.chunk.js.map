{"version":3,"sources":["Store.tsx","App.tsx","Actions.ts","components/HomePage.tsx","components/FavPage.tsx","index.tsx"],"names":["initialState","episodes","favourites","Store","createContext","reducer","state","action","type","payload","StoreProvider","children","useReducer","dispatch","Provider","value","App","useContext","className","to","length","fetchDataAction","a","fetch","data","json","dataJSON","_embedded","toggleFavAction","episode","episodeInFav","includes","dispatchObj","filter","fav","id","EpisodesList","lazy","HomePage","useEffect","props","store","fallback","FavPage","React","RouterPage","pageComponent","ReactDOM","render","path","document","getElementById"],"mappings":"oPAEMA,EAAuB,CAC5BC,SAAU,GACVC,WAAY,IAEAC,EAAQC,wBAA4BJ,GAC3CK,EAAU,SAACC,EAAeC,GAC/B,OAAQA,EAAOC,MACd,IAAK,aACJ,OAAO,2BAAKF,GAAZ,IAAmBL,SAAUM,EAAOE,UACrC,IAAK,UACJ,OAAO,2BAAKH,GAAZ,IAAmBJ,WAAW,GAAD,mBAAMI,EAAMJ,YAAZ,CAAwBK,EAAOE,YAC7D,IAAK,aACJ,OAAO,2BAAKH,GAAZ,IAAmBJ,WAAYK,EAAOE,UACvC,QACC,OAAOH,IAGGI,EAAgB,SAAC,GAEoB,IADjDC,EACgD,EADhDA,SACgD,EACtBC,qBAAWP,EAASL,GADE,mBACzCM,EADyC,KAClCO,EADkC,KAEhD,OACC,kBAACV,EAAMW,SAAP,CAAgBC,MAAO,CAAET,QAAOO,aAAaF,I,OCFhCK,EAnBH,SAAC,GAA0D,IAAxDL,EAAuD,EAAvDA,SACNL,EAAUW,qBAAWd,GAArBG,MAER,OACC,kBAAC,WAAD,KACC,4BAAQY,UAAU,UACjB,6BACC,4CACA,2DAED,6BACC,kBAAC,IAAD,CAAMC,GAAG,KAAT,QACA,kBAAC,IAAD,CAAMA,GAAG,UAAT,iBAAiCb,EAAMJ,WAAWkB,UAGnDT,I,wBCjBSU,EAAe,uCAAG,WAAOR,GAAP,iBAAAS,EAAA,4DAE7B,8EAF6B,SAIXC,MAFlB,+EAF6B,cAIxBC,EAJwB,gBAKPA,EAAKC,OALE,cAKxBC,EALwB,yBAMvBb,EAAS,CACfL,KAAM,aACNC,QAASiB,EAASC,UAAU1B,YARC,2CAAH,sDAYf2B,EAAkB,SAC9BtB,EACAO,EACAgB,GAEA,IAAMC,EAAexB,EAAMJ,WAAW6B,SAASF,GAC3CG,EAAc,CACjBxB,KAAM,UACNC,QAASoB,GAENC,IAIHE,EAAc,CACbxB,KAAM,aACNC,QALyBH,EAAMJ,WAAW+B,QAC1C,SAACC,GAAD,OAAmBA,EAAIC,KAAON,EAAQM,QAOxC,OAAOtB,EAASmB,IC1BXI,EAAeC,gBAAU,kBAAM,gCAsBtBC,EArBE,WAAoB,IAAD,EACPrB,qBAAWd,GAA/BG,EAD2B,EAC3BA,MAAOO,EADoB,EACpBA,SACf0B,qBAAU,WACiB,IAA1BjC,EAAML,SAASmB,QAAgBC,EAAgBR,MAEhD,IAAM2B,EAAuB,CAC5BvC,SAAUK,EAAML,SAChBwC,MAAO,CAAEnC,QAAOO,YAChBe,kBACA1B,WAAYI,EAAMJ,YAEnB,OACC,kBAAC,EAAD,KACC,kBAAC,WAAD,CAAUwC,SAAU,4CACnB,6BAASxB,UAAU,kBAClB,kBAACkB,EAAiBI,OCjBjBJ,EAAeC,gBAAU,kBAAM,gCACtB,SAASM,IAAwB,IAAD,EAClBC,IAAM3B,WAAWd,GAArCG,EADsC,EACtCA,MAAOO,EAD+B,EAC/BA,SACT2B,EAAuB,CAC5BvC,SAAUK,EAAMJ,WAChBuC,MAAO,CAAEnC,QAAOO,YAChBe,kBACA1B,WAAYI,EAAMJ,YAEnB,OACC,kBAAC,EAAD,KACC,kBAAC,WAAD,CAAUwC,SAAU,4CACnB,yBAAKxB,UAAU,kBACd,kBAAC,EAAiBsB,MCXvB,IAAMK,EAAa,SAClBL,GADkB,OAEdA,EAAMM,eACXC,IAASC,OACR,kBAAC,EAAD,KACC,kBAAC,IAAD,KACC,kBAACH,EAAD,CAAYC,cAAe,kBAAC,EAAD,MAAcG,KAAK,MAC9C,kBAACJ,EAAD,CAAYC,cAAe,kBAACH,EAAD,MAAaM,KAAK,aAG/CC,SAASC,eAAe,W","file":"static/js/main.4177b85a.chunk.js","sourcesContent":["import React, { useReducer, createContext } from 'react';\nimport { IState, IAction } from './types/interfaces';\nconst initialState: IState = {\n\tepisodes: [],\n\tfavourites: [],\n};\nexport const Store = createContext<IState | any>(initialState);\nconst reducer = (state: IState, action: IAction): IState => {\n\tswitch (action.type) {\n\t\tcase 'FETCH_DATA':\n\t\t\treturn { ...state, episodes: action.payload };\n\t\tcase 'ADD_FAV':\n\t\t\treturn { ...state, favourites: [...state.favourites, action.payload] };\n\t\tcase 'REMOVE_FAV':\n\t\t\treturn { ...state, favourites: action.payload };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\nexport const StoreProvider = ({\n\tchildren,\n}: JSX.ElementChildrenAttribute): JSX.Element => {\n\tconst [state, dispatch] = useReducer(reducer, initialState);\n\treturn (\n\t\t<Store.Provider value={{ state, dispatch }}>{children}</Store.Provider>\n\t);\n};\n","import React, { useContext, Fragment } from 'react';\nimport { Store } from './Store';\nimport { Link } from '@reach/router';\nconst App = ({ children }: { children: JSX.Element }): JSX.Element => {\n\tconst { state } = useContext(Store);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<header className=\"header\">\n\t\t\t\t<div>\n\t\t\t\t\t<h1>Money Heist!</h1>\n\t\t\t\t\t<p>Pick your favourite episode</p>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Link to=\"/\">Home</Link>\n\t\t\t\t\t<Link to=\"/faves\">Favourite(s): {state.favourites.length}</Link>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t{children}\n\t\t</Fragment>\n\t);\n};\nexport default App;\n","import { IAction, IEpisode, IState, Dispatch } from './types/interfaces';\nexport const fetchDataAction = async (dispatch: Dispatch) => {\n\tconst URL =\n\t\t'https://api.tvmaze.com/singlesearch/shows?q=la-casa-de-papel&embed=episodes';\n\n\tconst data = await fetch(URL);\n\tconst dataJSON = await data.json();\n\treturn dispatch({\n\t\ttype: 'FETCH_DATA',\n\t\tpayload: dataJSON._embedded.episodes,\n\t});\n};\n//Add IState withits type\nexport const toggleFavAction = (\n\tstate: IState,\n\tdispatch: any,\n\tepisode: IEpisode | any\n): IAction => {\n\tconst episodeInFav = state.favourites.includes(episode);\n\tlet dispatchObj = {\n\t\ttype: 'ADD_FAV',\n\t\tpayload: episode,\n\t};\n\tif (episodeInFav) {\n\t\tconst favWithoutEpisode = state.favourites.filter(\n\t\t\t(fav: IEpisode) => fav.id !== episode.id\n\t\t);\n\t\tdispatchObj = {\n\t\t\ttype: 'REMOVE_FAV',\n\t\t\tpayload: favWithoutEpisode,\n\t\t};\n\t}\n\treturn dispatch(dispatchObj);\n};\n","import React, { useContext, useEffect, lazy, Suspense } from 'react';\nimport App from '../App';\nimport { Store } from '../Store';\nimport { IEpisodeProps } from '../types/interfaces';\nimport { fetchDataAction, toggleFavAction } from '../Actions';\n\nconst EpisodesList = lazy<any>(() => import('./EpisodesList'));\nconst HomePage = (): JSX.Element => {\n\tconst { state, dispatch } = useContext(Store);\n\tuseEffect(() => {\n\t\tstate.episodes.length === 0 && fetchDataAction(dispatch);\n\t});\n\tconst props: IEpisodeProps = {\n\t\tepisodes: state.episodes,\n\t\tstore: { state, dispatch },\n\t\ttoggleFavAction,\n\t\tfavourites: state.favourites,\n\t};\n\treturn (\n\t\t<App>\n\t\t\t<Suspense fallback={<div>loading...</div>}>\n\t\t\t\t<section className=\"episode-layout\">\n\t\t\t\t\t<EpisodesList {...props} />\n\t\t\t\t</section>\n\t\t\t</Suspense>\n\t\t</App>\n\t);\n};\nexport default HomePage;\n","import React, { lazy, Suspense } from 'react';\nimport App from '../App';\nimport { Store } from '../Store';\nimport { IEpisodeProps } from '../types/interfaces';\nimport { toggleFavAction } from '../Actions';\nconst EpisodesList = lazy<any>(() => import('./EpisodesList'));\nexport default function FavPage(): JSX.Element {\n\tconst { state, dispatch } = React.useContext(Store);\n\tconst props: IEpisodeProps = {\n\t\tepisodes: state.favourites,\n\t\tstore: { state, dispatch },\n\t\ttoggleFavAction,\n\t\tfavourites: state.favourites,\n\t};\n\treturn (\n\t\t<App>\n\t\t\t<Suspense fallback={<div>loading...</div>}>\n\t\t\t\t<div className=\"episode-layout\">\n\t\t\t\t\t<EpisodesList {...props} />\n\t\t\t\t</div>\n\t\t\t</Suspense>\n\t\t</App>\n\t);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { StoreProvider } from './Store';\nimport { Router, RouteComponentProps } from '@reach/router';\nimport HomePage from './components/HomePage';\nimport FavPage from './components/FavPage';\nconst RouterPage = (\n\tprops: { pageComponent: JSX.Element } & RouteComponentProps\n) => props.pageComponent;\nReactDOM.render(\n\t<StoreProvider>\n\t\t<Router>\n\t\t\t<RouterPage pageComponent={<HomePage />} path=\"/\" />\n\t\t\t<RouterPage pageComponent={<FavPage />} path=\"/faves\" />\n\t\t</Router>\n\t</StoreProvider>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}